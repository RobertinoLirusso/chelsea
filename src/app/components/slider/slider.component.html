<!-- Loading State -->
<div class="container-fluid d-flex flex-column justify-content-center align-items-center vh-100 vw-100 text-white"
     *ngIf="isLoading">
  <div class="text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading matches...</p>
  </div>
</div>

<!-- Error State -->
<div class="container-fluid d-flex flex-column justify-content-center align-items-center vh-100 vw-100 text-white bg-dark"
     *ngIf="hasError">
  <div class="text-center">
    <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
    <h4>Error Loading Matches</h4>
    <p>Please check your internet connection and try again.</p>
    <button class="btn btn-primary mt-3" (click)="ngOnInit()">Retry</button>
  </div>
</div>

<!-- Match Display -->
<div class="container-fluid d-flex flex-column justify-content-center align-items-center vh-100 vw-100 text-white match-bg"
     *ngIf="!isShowingFinalSlide && currentMatch && !isLoading && !hasError"
     [ngStyle]="{
       'background-image': 'url(' + currentMatch.match_image + ')'
     }">

  <!-- Overlay para opacidad -->
  <div class="match-overlay"></div>

  <!-- TODO tu contenido igual -->
  <ng-container>
    <div class="row w-100 align-items-center justify-content-center position-relative">
      <div class="col-md-12">
        <h5 class="text-center">{{ currentMatch.stage }}</h5>
        <h2 class="display-5 fw-bold text-center mb-3">{{ currentMatch.match }}</h2>
        <p class="lead text-center">
          {{ currentMatch.description }}
          <span>
            <a [href]="currentMatch.match_report" target="_blank" rel="noopener noreferrer">
              Match Report
            </a>
          </span>
        </p>

        <div class="text-center mt-4">
          <span class="text-success fw-semibold fs-5"
                style="cursor: pointer;"
                data-bs-toggle="modal"
                data-bs-target="#goalModal"
                title="Click to watch goal">
            <i class="fas fa-thin fa-futbol fa-bounce me-2"></i>
            Watch Goal
          </span>
        </div>
      </div>
    </div>

    <div class="d-flex gap-5 mt-4 justify-content-center align-items-center w-100 position-absolute bottom-0 mb-3">
      <i class="fas fa-arrow-left fa-2x text-white"
         role="button"
         [class.opacity-25]="currentIndex === 0"
         [class.pointer-events-none]="currentIndex === 0"
         (click)="previousMatch()">
      </i>

      <i class="fas fa-arrow-right fa-2x text-white"
         role="button"
         (click)="nextMatch()">
      </i>
    </div>
  </ng-container>
</div>

<!-- Final Video Slide -->
<div class="container-fluid d-flex flex-column justify-content-center align-items-center vh-100 vw-100 text-white bg-black"
     *ngIf="isShowingFinalSlide && !isLoading && !hasError">

  <video #finalVideo
         *ngIf="finalVideoUrl"
         [src]="finalVideoUrl"
         muted
         autoplay
         class="w-100 h-100 object-fit-cover"
         (ended)="onVideoEnded()">
    Your browser does not support the video tag.
  </video>
</div>

<!-- Fullscreen Modal for Goal Videos -->
<div class="modal fade" id="goalModal" tabindex="-1" aria-hidden="true" (shown.bs.modal)="playVideo()">
  <div class="modal-dialog modal-fullscreen m-0">
    <div class="modal-content bg-black p-0 border-0">
        <video #goalVideo
               *ngIf="currentMatch?.goal_video"
               [src]="currentMatch?.goal_video"
               muted
               class="w-100 h-100 object-fit-cover m-0"
               (ended)="onVideoEnded()">
          Your browser does not support the video tag.
        </video>
    </div>
  </div>
</div>